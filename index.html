<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Civciv</title>

<style>
html,body{
  margin:0; padding:0; overflow:hidden;
  background:#cceeff;
  touch-action:none;
  font-family:system-ui,sans-serif;
}
canvas{display:block}
#menu,#gameover{
  position:fixed; inset:0;
  background:rgba(0,0,0,.7);
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  z-index:10;
}
button{
  font-size:20px;
  padding:10px 24px;
  margin:10px;
  border-radius:14px;
  border:none;
}
#ui{
  position:fixed; top:10px; left:10px;
  background:rgba(255,255,255,.85);
  padding:8px 12px;
  border-radius:12px;
  font-weight:600;
}
</style>
</head>
<body>

<canvas id="game"></canvas>

<div id="ui" style="display:none">
ü™ô <span id="coins">0</span>
</div>

<div id="menu">
  <h2>Civciv üê§</h2>
  <div>Chick colour:</div>
  <select id="colorSelect">
    <option value="#ffeb3b">Yellow</option>
    <option value="#ff9800">Orange</option>
    <option value="#e91e63">Pink</option>
    <option value="#4caf50">Green</option>
    <option value="#03a9f4">Blue</option>
  </select>
  <button onclick="startGame()">Start</button>
</div>

<div id="gameover" style="display:none">
  <h2>Game Over</h2>
  <button onclick="backToMenu()">Menu</button>
</div>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");

function resize(){
  canvas.width=innerWidth;
  canvas.height=innerHeight;
}
resize(); addEventListener("resize",resize);

let player, enemies=[], coin, target, coins, playing=false;
let chickColor="#ffeb3b";
let spawnTimer=0;

canvas.addEventListener("touchstart",e=>{
  const t=e.touches[0];
  target={x:t.clientX,y:t.clientY};
},{passive:false});
canvas.addEventListener("mousedown",e=>{
  target={x:e.clientX,y:e.clientY};
});

function startGame(){
  chickColor=document.getElementById("colorSelect").value;
  coins=0;
  document.getElementById("coins").innerText=coins;

  player={x:120,y:canvas.height/2,r:20};
  enemies=[];
  spawnEnemy();
  spawnEnemy();

  coin={x:canvas.width/2,y:canvas.height/2,r:10};
  spawnTimer=0;
  playing=true;

  menu.style.display="none";
  gameover.style.display="none";
  ui.style.display="block";
}

function backToMenu(){
  playing=false;
  menu.style.display="flex";
  gameover.style.display="none";
  ui.style.display="none";
}

function spawnEnemy(){
  enemies.push({
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height,
    r:20,
    dir:Math.random()*Math.PI*2,
    speed:2.4 + Math.random()*0.6
  });
}

function drawChick(o,color){
  ctx.fillStyle=color;
  ctx.beginPath();
  ctx.arc(o.x,o.y,20,0,Math.PI*2);
  ctx.fill();
  ctx.fillStyle="#000";
  ctx.beginPath();ctx.arc(o.x-6,o.y-4,2,0,Math.PI*2);ctx.fill();
  ctx.beginPath();ctx.arc(o.x+6,o.y-4,2,0,Math.PI*2);ctx.fill();
}

function movePlayer(){
  if(!target) return;
  const dx=target.x-player.x;
  const dy=target.y-player.y;
  const d=Math.hypot(dx,dy);
  if(d>2){
    player.x+=dx/d*3;
    player.y+=dy/d*3;
  }
}

function moveEnemy(e){
  e.dir+=(Math.random()-.5)*0.15;
  e.x+=Math.cos(e.dir)*e.speed;
  e.y+=Math.sin(e.dir)*e.speed;

  if(e.x<0||e.x>canvas.width) e.dir=Math.PI-e.dir;
  if(e.y<0||e.y>canvas.height) e.dir=-e.dir;
}

function collide(a,b){
  return Math.hypot(a.x-b.x,a.y-b.y)<a.r+b.r;
}

function loop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  if(playing){
    movePlayer();
    drawChick(player,chickColor);

    enemies.forEach(e=>{
      moveEnemy(e);
      drawChick(e,"#f44336");
      if(collide(player,e)){
        playing=false;
        gameover.style.display="flex";
      }
    });

    ctx.fillStyle="gold";
    ctx.beginPath();
    ctx.arc(coin.x,coin.y,10,0,Math.PI*2);
    ctx.fill();

    if(collide(player,coin)){
      coins++;
      document.getElementById("coins").innerText=coins;
      coin.x=Math.random()*canvas.width;
      coin.y=Math.random()*canvas.height;
    }

    spawnTimer++;
    if(spawnTimer>600){ // every ~10 seconds
      spawnEnemy();
      spawnTimer=0;
    }
  }

  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
